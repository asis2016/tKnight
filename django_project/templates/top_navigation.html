{% load i18n %}
{% load static %}

<div id="topNavigation" class="px-3 py-2">
    <div class="container-fluid">
        <div class="d-flex flex-wrap align-items-center justify-content-lg-start">
            <!-- nav-left, breadcrumb -->
            <a href="#"
                class="nav-left d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
                <i class="bi bi-list" id="sidebarToggleBtn"></i>
            </a>

            <!-- search form -->
            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3 d-none" role="search">
                <div class="input-group text-white">
                    <input type="text" class="form-control form-control-dark text-bg-dark text-white"
                        value="{% trans 'search here' %}">
                    <a class="btn" href="{% url 'wip' %}">
                        <i class="bi bi-search"></i>
                    </a>
                </div>
            </form>

            <!-- nav-right -->
            <div class="nav-right col-lg-auto my-2">
                <!-- nav -->
                <ul class="nav">
                    <!-- Home icon for sm screen -->
                    <li class="only-d-sm">
                        <a href="index" class="nav-link text-white">
                            <i class="bi bi-house-door-fill"></i>
                        </a>
                    </li>
                    <!-- for profile page -->
                    <li>
                        <a href="#" class="nav-link text-white" data-bs-toggle="dropdown" aria-expanded="true">
                            <i class="bi bi-person-circle"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end"
                            style="position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(-91px, 58px);"
                            data-popper-placement="bottom-end">
                            <li>
                                <a class="dropdown-item" href="{% url 'userprofile' %}">
                                    <small>
                                        <i class="bi bi-person-fill me-2"></i>
                                        {% trans 'My Profile' %}
                                    </small>
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="{% url 'userprofile' %}">
                                    <small>
                                        <i class="bi bi-gear-fill me-2"></i>
                                        {% trans 'settings' %}
                                    </small>
                                </a>
                            </li>
                            <!-- <hr class="my-1"> -->
                            <div class="divider my-1"></div>
                            <li>
                                <a class="dropdown-item" href="{% url 'pm_logout' %}">
                                    <small>
                                        <i class="bi bi-box-arrow-right me-2"></i>
                                        {% trans 'Sign out' %}
                                    </small>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!-- for modal applications -->
                    <li>
                        <a href="#" class="nav-link text-white" data-bs-toggle="modal"
                            data-bs-target="#modalApplication">
                            <i class="bi bi-grid-3x3-gap"></i>
                        </a>
                    </li>
                    <!-- tuxBattery -->
                    <li id="tuxBattery">
                        <a href="#" class="nav-link text-white" data-bs-toggle="tooltip" data-bs-placement="left"
                            data-bs-original-title="">
                            <i class="bi"></i>
                        </a>
                    </li>
                    <!-- tuxBattery ends -->
                    <!-- language switcher -->
                    <form action="{% url 'set_language' %}" method="post" class="mt-1">
                        {% csrf_token %}
                        <input name="next" type="hidden" value="{{ redirect_to }}" />
                        <select name="language" class="form-select-sm">
                            {% get_available_languages as languages %}
                            {% for lang_code, lang_name in languages %}
                            <option value="{{ lang_code }}" 
                                    {% if lang_code == request.LANGUAGE_CODE %}selected{% endif %}>
                                {{ lang_name }}
                            </option>
                            {% endfor %}
                        </select>
                        <button type="submit" class="btn btn-secondary btn-sm"><i class="bi bi-floppy-fill"></i></button>
                    </form>
                    <!-- language switcher ends -->
                </ul>
            </div>
        </div>
    </div>
</div>