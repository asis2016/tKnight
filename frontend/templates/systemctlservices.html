{% extends 'base.html' %}

{% block title %}
Systemctl Services
{% endblock %}

{% block header %}
<!-- Todo refactor -->
<style>
    .card-body {
        padding: 1rem !important;
        min-height: 110px;
    }

    .running {
        color: green;
    }

    .exited {
        color: yellow;
    }

    .failed {
        color: red;
    }

    @media screen and (max-width: 991px) {
        h5 {
            font-size: 1rem;
        }

        p {
            font-size: 1rem;
        }


        #systemctlServices .card-body {
            display: block !important;
        }

        #systemctlServices .card-body div:first-child {
            width: 100% !important;
        }

        #systemctlServices .card-body div:first-child p {
            margin-top: .8rem !important;
            margin-bottom: .8rem !important;
        }

        #systemctlServices .card-body div:last-child {
            text-align: center;
            font-weight: 600;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="row sm-pt-0" id="systemctlServices">
    <!-- data here -->
</div>
{% endblock %}

{% block footer %}
<script>
    /**
     * processes
     */
    $.ajax({
        url: BASE_API_URL + '/systemctl/services/',
        dataType: 'json',
        success: function (response) {
            let row = $('#systemctlServices');

            $.each(response['result'], function (index, item) {
                let col = $(`<div class="grid-margin col-lg-6 col-sm-12">`);
                let newCard = $(`<div class="card mb-3">`);
                let cardBody = $('<div class="card-body d-flex justify-content-between" style="align-items: center;">');

                cardBody.append(`<div style="width:50%"><h5>${item['unit']}</h5><p class="mb-0">${item['description']}</p></div>`);
                cardBody.append(`<div>${item['load']}</div>`);
                cardBody.append(`<div>${item['active']}</div>`);
                cardBody.append(`<div class="${item['sub']}">${item['sub']}</div>`);

                newCard.append(cardBody);
                col.append(newCard);
                row.append(col);
            });
        },
        error: function () {
            console.error('Error fetching data:', error);
        }
    });
</script>
{% endblock footer %}